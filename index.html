<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tegy S - Образовательный Бот</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            overflow-y: auto;
            animation: fadeIn 1s ease-in-out;
            transition: background 0.5s;
            position: relative;
        }
        body.dark {
            background: linear-gradient(135deg, #1e1e1e 0%, #333 100%);
            color: #ddd;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.1;
            pointer-events: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; } to { opacity: 1; }
        }
        header {
            width: 100%;
            text-align: center;
            padding: 10px 0;
            background: rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        h1 {
            font-size: 2.5em;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; }
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            animation: cardAppear 0.8s ease-in-out;
        }
        body.dark .section {
            background: rgba(0, 0, 0, 0.3);
        }
        @keyframes cardAppear {
            from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; }
        }
        .button {
            background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);
            border: none;
            border-radius: 10px;
            color: #fff;
            padding: 15px 30px;
            font-size: 1.2em;
            margin: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: pulse 1.5s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .button i {
            margin-right: 10px;
        }
        @keyframes pulse {
            0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); }
        }
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .flashcard {
            background: #fff;
            color: #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s;
            position: relative;
        }
        .flashcard:hover {
            transform: translateY(-5px);
        }
        body.dark .flashcard {
            background: #444;
            color: #fff;
        }
        .flashcard img {
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 10px;
            loading: lazy;
        }
        .flashcard .speak-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }
        .quiz-container {
            margin: 20px 0;
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
        }
        .quiz-option {
            background: #eee;
            color: #333;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        body.dark .quiz-option {
            background: #555;
            color: #ddd;
        }
        .quiz-option:hover {
            background: #ddd;
        }
        body.dark .quiz-option:hover {
            background: #666;
        }
        .quiz-input {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border: none;
            width: 80%;
        }
        .result {
            font-size: 1.2em;
            margin-top: 10px;
        }
        .about-text {
            font-size: 1em;
            line-height: 1.5;
        }
        .level-section {
            display: none;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f00;
            animation: confetti-fall 1s linear;
        }
        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        .progress-bar {
            background: #ddd;
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .progress-fill {
            background: #4caf50;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }
        .award {
            font-size: 2em;
            animation: bounce 1s;
        }
        @keyframes bounce {
            0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); }
        }
        .search-input {
            padding: 10px;
            width: 80%;
            margin-bottom: 10px;
            border-radius: 5px;
            border: none;
        }
        iframe {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .profile-section {
            text-align: center;
        }
        .badge {
            font-size: 2em;
            margin: 5px;
        }
        .streak {
            font-size: 1.5em;
            color: gold;
        }
        .daily-challenge {
            background: rgba(255, 215, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .favorite-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: transparent;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
        }
        .favorites-list {
            margin-top: 20px;
        }
        footer {
            width: 100%;
            text-align: center;
            padding: 10px 0;
            background: rgba(0,0,0,0.2);
            position: fixed;
            bottom: 0;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Tegy S: Обучение по направлениям</h1>
    </header>
    
    <div id="main-menu" class="section">
        <p>Выберите направление для обучения:</p>
        <button class="button" onclick="showSection('english')"><i class="fas fa-book"></i> Английский язык</button>
        <button class="button" onclick="showSection('math')"><i class="fas fa-calculator"></i> Математика</button>
        <button class="button" onclick="showSection('history')"><i class="fas fa-history"></i> История</button>
        <button class="button" onclick="showSection('profile')"><i class="fas fa-user"></i> Профиль</button>
        <button class="button" onclick="showSection('about')"><i class="fas fa-info-circle"></i> О нас</button>
        <button class="button" onclick="toggleTheme()"><i class="fas fa-moon"></i> Тёмная тема</button>
    </div>
    
    <div id="english-section" class="section" style="display: none;">
        <h2>Уроки английского языка</h2>
        <input type="text" class="search-input" id="search-english" placeholder="Поиск по словам..." oninput="searchFlashcards('english')">
        <div id="daily-challenge-english" class="daily-challenge" style="display: none;">
            <h3>Ежедневный вызов</h3>
            <p id="daily-word"></p>
            <input type="text" id="daily-input" class="quiz-input" placeholder="Перевод">
            <button class="button" onclick="checkDaily('english')">Проверить</button>
            <p id="daily-result" class="result"></p>
        </div>
        <p>Выберите уровень:</p>
        <button class="button" onclick="showLevel('english', 'beginner')"><i class="fas fa-star"></i> Beginner</button>
        <button class="button" onclick="showLevel('english', 'intermediate')"><i class="fas fa-star-half-alt"></i> Intermediate</button>
        <button class="button" onclick="showLevel('english', 'advanced')"><i class="fas fa-star"></i> Advanced</button>
        
        <div id="english-beginner-level" class="level-section">
            <h3>Beginner: Основные слова и фразы</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-english-beginner" style="width: 0%;"></div></div>
            <div id="flashcards-english-beginner"></div>
            <div id="quizzes-english-beginner" class="quiz-container"></div>
            <div id="award-english-beginner" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('english', 'beginner')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-english-beginner" onclick="showLevel('english', 'intermediate')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('english')">Вернуться к уровням</button>
        </div>
        
        <div id="english-intermediate-level" class="level-section">
            <h3>Intermediate: Фразы и грамматика</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-english-intermediate" style="width: 0%;"></div></div>
            <div id="flashcards-english-intermediate"></div>
            <div id="quizzes-english-intermediate" class="quiz-container"></div>
            <div id="award-english-intermediate" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('english', 'intermediate')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-english-intermediate" onclick="showLevel('english', 'advanced')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('english')">Вернуться к уровням</button>
        </div>
        
        <div id="english-advanced-level" class="level-section">
            <h3>Advanced: Идиомы и сложные конструкции</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-english-advanced" style="width: 0%;"></div></div>
            <div id="flashcards-english-advanced"></div>
            <div id="quizzes-english-advanced" class="quiz-container"></div>
            <div id="award-english-advanced" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('english', 'advanced')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-english-advanced" onclick="showMainMenu()">Завершить</button>
            <button class="button" onclick="hideLevels('english')">Вернуться к уровням</button>
        </div>
        <div class="favorites-list" id="favorites-english">
            <h3>Избранные карточки</h3>
            <!-- Favorites will be appended here -->
        </div>
    </div>
    
    <!-- Math Section -->
    <div id="math-section" class="section" style="display: none;">
        <h2>Уроки математики</h2>
        <input type="text" class="search-input" id="search-math" placeholder="Поиск по темам..." oninput="searchFlashcards('math')">
        <div id="daily-challenge-math" class="daily-challenge" style="display: none;">
            <h3>Ежедневный вызов</h3>
            <p id="daily-math-question"></p>
            <input type="text" id="daily-math-input" class="quiz-input" placeholder="Ответ">
            <button class="button" onclick="checkDaily('math')">Проверить</button>
            <p id="daily-math-result" class="result"></p>
        </div>
        <p>Выберите уровень:</p>
        <button class="button" onclick="showLevel('math', 'beginner')"><i class="fas fa-star"></i> Beginner</button>
        <button class="button" onclick="showLevel('math', 'intermediate')"><i class="fas fa-star-half-alt"></i> Intermediate</button>
        <button class="button" onclick="showLevel('math', 'advanced')"><i class="fas fa-star"></i> Advanced</button>
        
        <div id="math-beginner-level" class="level-section">
            <h3>Beginner: Основы арифметики</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-math-beginner" style="width: 0%;"></div></div>
            <div id="flashcards-math-beginner"></div>
            <div id="quizzes-math-beginner" class="quiz-container"></div>
            <div id="award-math-beginner" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('math', 'beginner')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-math-beginner" onclick="showLevel('math', 'intermediate')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('math')">Вернуться к уровням</button>
        </div>
        
        <div id="math-intermediate-level" class="level-section">
            <h3>Intermediate: Геометрия и алгебра</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-math-intermediate" style="width: 0%;"></div></div>
            <div id="flashcards-math-intermediate"></div>
            <div id="quizzes-math-intermediate" class="quiz-container"></div>
            <div id="award-math-intermediate" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('math', 'intermediate')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-math-intermediate" onclick="showLevel('math', 'advanced')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('math')">Вернуться к уровням</button>
        </div>
        
        <div id="math-advanced-level" class="level-section">
            <h3>Advanced: Калькулюс и статистика</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-math-advanced" style="width: 0%;"></div></div>
            <div id="flashcards-math-advanced"></div>
            <div id="quizzes-math-advanced" class="quiz-container"></div>
            <div id="award-math-advanced" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('math', 'advanced')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-math-advanced" onclick="showMainMenu()">Завершить</button>
            <button class="button" onclick="hideLevels('math')">Вернуться к уровням</button>
        </div>
        <div class="favorites-list" id="favorites-math">
            <h3>Избранные карточки</h3>
            <!-- Favorites will be appended here -->
        </div>
    </div>
    
    <!-- History Section -->
    <div id="history-section" class="section" style="display: none;">
        <h2>Уроки истории</h2>
        <input type="text" class="search-input" id="search-history" placeholder="Поиск по событиям..." oninput="searchFlashcards('history')">
        <div id="daily-challenge-history" class="daily-challenge" style="display: none;">
            <h3>Ежедневный вызов</h3>
            <p id="daily-history-question"></p>
            <input type="text" id="daily-history-input" class="quiz-input" placeholder="Ответ">
            <button class="button" onclick="checkDaily('history')">Проверить</button>
            <p id="daily-history-result" class="result"></p>
        </div>
        <p>Выберите уровень:</p>
        <button class="button" onclick="showLevel('history', 'beginner')"><i class="fas fa-star"></i> Beginner</button>
        <button class="button" onclick="showLevel('history', 'intermediate')"><i class="fas fa-star-half-alt"></i> Intermediate</button>
        <button class="button" onclick="showLevel('history', 'advanced')"><i class="fas fa-star"></i> Advanced</button>
        
        <div id="history-beginner-level" class="level-section">
            <h3>Beginner: Древний мир</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-history-beginner" style="width: 0%;"></div></div>
            <div id="flashcards-history-beginner"></div>
            <div id="quizzes-history-beginner" class="quiz-container"></div>
            <div id="award-history-beginner" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('history', 'beginner')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-history-beginner" onclick="showLevel('history', 'intermediate')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('history')">Вернуться к уровням</button>
        </div>
        
        <div id="history-intermediate-level" class="level-section">
            <h3>Intermediate: Средневековье</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-history-intermediate" style="width: 0%;"></div></div>
            <div id="flashcards-history-intermediate"></div>
            <div id="quizzes-history-intermediate" class="quiz-container"></div>
            <div id="award-history-intermediate" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('history', 'intermediate')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-history-intermediate" onclick="showLevel('history', 'advanced')">Следующий уровень</button>
            <button class="button" onclick="hideLevels('history')">Вернуться к уровням</button>
        </div>
        
        <div id="history-advanced-level" class="level-section">
            <h3>Advanced: Современная история</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-history-advanced" style="width: 0%;"></div></div>
            <div id="flashcards-history-advanced"></div>
            <div id="quizzes-history-advanced" class="quiz-container"></div>
            <div id="award-history-advanced" style="display: none;"><span class="award">🏆 Уровень пройден!</span></div>
            <button class="button" onclick="repeatLevel('history', 'advanced')">Повторить уровень</button>
            <button class="button" style="display: none;" id="next-history-advanced" onclick="showMainMenu()">Завершить</button>
            <button class="button" onclick="hideLevels('history')">Вернуться к уровням</button>
        </div>
        <div class="favorites-list" id="favorites-history">
            <h3>Избранные карточки</h3>
            <!-- Favorites will be appended here -->
        </div>
    </div>
    
    <div id="profile-section" class="section profile-section" style="display: none;">
        <h2>Ваш профиль</h2>
        <p>Прогресс по предметам:</p>
        <ul id="profile-progress"></ul>
        <p>Значки:</p>
        <div id="profile-badges"></div>
        <p>Серия дней: <span id="streak-counter" class="streak">0</span></p>
        <button class="button" onclick="shareProgress()"><i class="fas fa-share"></i> Поделиться прогрессом</button>
        <button class="button" onclick="showMainMenu()">Назад</button>
    </div>
    
    <div id="about-section" class="section" style="display: none;">
        <h2>О нас</h2>
        <p class="about-text">Tegcompany — инновационная компания, основанная в Республике Беларусь предпринимателем Юркевичем Артёмом Игоревичем. Мы разрабатываем образовательные инструменты с использованием ИИ для сделать обучение увлекательным и доступным. Новые функции: ежедневные вызовы, избранное, профиль с сериями и значками, речь для произношения, множественный выбор в квизах и многое другое! Добавлено множество новых уроков для всех уровней.</p>
        <button class="button" onclick="showMainMenu()">Назад</button>
    </div>
    
    <footer>
        &copy; 2025 Tegcompany. Все права защищены.
    </footer>
    
    <script>
        // Верификация Telegram
        const initData = Telegram.WebApp.initDataUnsafe;
        if (!initData || !initData.user) {
            document.body.innerHTML = '<p style="color: white; text-align: center;">Доступ только через Telegram!</p>';
        } else {
            Telegram.WebApp.ready();
            Telegram.WebApp.MainButton.text = 'Вернуться в меню';
            Telegram.WebApp.MainButton.onClick(() => showMainMenu());
            Telegram.WebApp.MainButton.show();
            Telegram.WebApp.expand();
        }

        // Расширенные данные уроков с множеством новых уроков
        const subjects = {
            english: {
                beginner: {
                    flashcards: [
                        { word: 'Apple', translation: 'Яблоко', example: 'I eat an apple every day.', img: 'https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=300', audio: '', fact: 'Apple — это также компания, основанная Стивом Джобсом.' },
                        { word: 'Banana', translation: 'Банан', example: 'I like bananas.', img: 'https://images.unsplash.com/photo-1571771894821-ce9b6c276b63?w=300', audio: '', fact: 'Бананы — это ягоды!' },
                        { word: 'Car', translation: 'Машина', example: 'The car is red.', img: 'https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=300', audio: '', fact: 'Первая машина была изобретена в 1886 году.' },
                        { word: 'Dog', translation: 'Собака', example: 'My dog is friendly.', img: 'https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=300', audio: '', fact: 'Собаки — лучшие друзья человека.' },
                        { word: 'House', translation: 'Дом', example: 'I live in a big house.', img: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=300', audio: '', fact: 'Дом — это крепость.' },
                        { word: 'Book', translation: 'Книга', example: 'I read a book.', img: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300', audio: '', fact: 'Книги — лучшие друзья.' },
                        { word: 'Water', translation: 'Вода', example: 'Drink more water.', img: 'https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=300', audio: '', fact: 'Вода — источник жизни.' },
                        { word: 'Sun', translation: 'Солнце', example: 'The sun is shining.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Солнце — звезда.' },
                        { word: 'Tree', translation: 'Дерево', example: 'The tree is tall.', img: 'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=300', audio: '', fact: 'Деревья производят кислород.' },
                        { word: 'Flower', translation: 'Цветок', example: 'She picked a flower.', img: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=300', audio: '', fact: 'Цветы — символ красоты.' },
                        { word: 'Bird', translation: 'Птица', example: 'The bird sings.', img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=300', audio: '', fact: 'Птицы могут летать.' },
                        { word: 'Fish', translation: 'Рыба', example: 'Fish swim in the sea.', img: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=300', audio: '', fact: 'Рыбы дышат жабрами.' },
                        { word: 'Mountain', translation: 'Гора', example: 'We climb the mountain.', img: 'https://images.unsplash.com/photo-1464822759023-fed622b3e44e?w=300', audio: '', fact: 'Горы формируют климат.' },
                        { word: 'River', translation: 'Река', example: 'The river flows.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', audio: '', fact: 'Реки несут воду в океаны.' },
                        { word: 'City', translation: 'Город', example: 'I live in a city.', img: 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=300', audio: '', fact: 'Города — центры цивилизации.' }
                    ],
                    quizzes: [
                        { question: 'Переведи "Dog"', answer: 'собака', options: ['кошка', 'собака', 'птица', 'рыба'] },
                        { question: 'Переведи "Thank you"', answer: 'спасибо', options: ['привет', 'спасибо', 'пока', 'да'] },
                        { question: 'Переведи "Water"', answer: 'вода', options: ['огонь', 'вода', 'земля', 'воздух'] },
                        { question: 'Переведи "House"', answer: 'дом', options: ['школа', 'дом', 'магазин', 'парк'] },
                        { question: 'Переведи "Book"', answer: 'книга', options: ['фильм', 'книга', 'песня', 'игра'] },
                        { question: 'Переведи "Sun"', answer: 'солнце', options: ['луна', 'солнце', 'звезда', 'земля'] },
                        { question: 'Переведи "Tree"', answer: 'дерево', options: ['цветок', 'дерево', 'трава', 'куст'] },
                        { question: 'Переведи "Flower"', answer: 'цветок', options: ['лист', 'цветок', 'корень', 'ствол'] },
                        { question: 'Переведи "Bird"', answer: 'птица', options: ['рыба', 'птица', 'зверь', 'насекомое'] },
                        { question: 'Переведи "Fish"', answer: 'рыба', options: ['птица', 'рыба', 'змея', 'черепаха'] }
                    ],
                    video: 'dQw4w9WgXcQ'
                },
                intermediate: {
                    flashcards: [
                        { word: 'Weather', translation: 'Погода', example: 'What\'s the weather like today?', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Погода влияет на настроение людей.' },
                        { word: 'Travel', translation: 'Путешествовать', example: 'I love to travel abroad.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Путешествия расширяют кругозор.' },
                        { word: 'Restaurant', translation: 'Ресторан', example: 'Let\'s go to an Italian restaurant.', img: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=300', audio: '', fact: 'Рестораны — места для гастрономии.' },
                        { word: 'Nice to meet you', translation: 'Приятно познакомиться', example: 'Nice to meet you, John!', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Это стандартная фраза для знакомства.' },
                        { word: 'Question', translation: 'Вопрос', example: 'Do you have any questions?', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Вопросы — ключ к знаниям.' },
                        { word: 'Friend', translation: 'Друг', example: 'She is my best friend.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Друзья — это семья, которую мы выбираем.' },
                        { word: 'Job', translation: 'Работа', example: 'I have a new job at the company.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Работа должна приносить радость.' },
                        { word: 'What time is it?', translation: 'Который час?', example: 'What time is it? It\'s 3 PM.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Время — деньги.' },
                        { word: 'School', translation: 'Школа', example: 'I go to school every day.', img: 'https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=300', audio: '', fact: 'Школа — основа образования.' },
                        { word: 'Vacation', translation: 'Отпуск', example: 'I\'m on summer vacation.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Отпуск нужен для отдыха.' },
                        { word: 'Hobby', translation: 'Хобби', example: 'My hobby is painting.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Хобби делает жизнь интересной.' },
                        { word: 'Music', translation: 'Музыка', example: 'I listen to music every evening.', img: 'https://images.unsplash.com/photo-1466637574441-749b8f19452f?w=300', audio: '', fact: 'Музыка лечит душу.' },
                        { word: 'Family', translation: 'Семья', example: 'My family is big.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Семья — это всё.' },
                        { word: 'Food', translation: 'Еда', example: 'Healthy food is important.', img: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=300', audio: '', fact: 'Еда — топливо для тела.' },
                        { word: 'Exercise', translation: 'Упражнение', example: 'I do exercise in the morning.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Спорт укрепляет здоровье.' }
                    ],
                    quizzes: [
                        { question: 'Переведи "I would like to order"', answer: 'я бы хотел заказать', options: ['я хочу есть', 'я бы хотел заказать', 'я устал', 'я счастлив'] },
                        { question: 'Переведи "Excuse me"', answer: 'извините', options: ['привет', 'извините', 'до свидания', 'спасибо'] },
                        { question: 'Переведи "Appointment"', answer: 'встреча', options: ['праздник', 'встреча', 'путешествие', 'еда'] },
                        { question: 'Переведи "I\'m sorry"', answer: 'извините', options: ['я рад', 'извините', 'я зол', 'я сплю'] },
                        { question: 'Переведи "Weekend"', answer: 'выходные', options: ['будни', 'выходные', 'праздник', 'работа'] },
                        { question: 'Переведи "Favorite"', answer: 'любимый', options: ['ненавистный', 'любимый', 'обычный', 'редкий'] },
                        { question: 'Переведи "Hotel"', answer: 'отель', options: ['дом', 'отель', 'школа', 'магазин'] },
                        { question: 'Переведи "Ticket"', answer: 'билет', options: ['книга', 'билет', 'карта', 'ключ'] },
                        { question: 'Переведи "Map"', answer: 'карта', options: ['книга', 'карта', 'фото', 'видео'] },
                        { question: 'Переведи "Music"', answer: 'музыка', options: ['танец', 'музыка', 'спорт', 'еда'] }
                    ],
                    video: 'M7lc1UVf-VE'
                },
                advanced: {
                    flashcards: [
                        { word: 'Break a leg', translation: 'Ни пуха ни пера', example: 'Break a leg on your exam!', img: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=300', audio: '', fact: 'Это театральная идиома для удачи!' },
                        { word: 'Piece of cake', translation: 'Легко, как пирог', example: 'The test was a piece of cake.', img: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=300', audio: '', fact: 'Происходит от лёгких задач.' },
                        { word: 'Hit the books', translation: 'Засесть за книги', example: 'I need to hit the books tonight.', img: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300', audio: '', fact: 'Идиома для интенсивной учёбы.' },
                        { word: 'Opportunity', translation: 'Возможность', example: 'This is a great opportunity for you.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Возможности приходят к подготовленным.' },
                        { word: 'Challenge', translation: 'Вызов', example: 'The project was a real challenge.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Вызовы делают нас сильнее!' },
                        { word: 'Success', translation: 'Успех', example: 'Hard work leads to success.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Успех — 1% вдохновения, 99% пота.' },
                        { word: 'Burn the midnight oil', translation: 'Работать допоздна', example: 'I burned the midnight oil to finish the report.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', audio: '', fact: 'Идиома из эпохи ламп!' },
                        { word: 'Think outside the box', translation: 'Мыслить нестандартно', example: 'Think outside the box for solutions.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Ключ к инновациям!' },
                        { word: 'Cut to the chase', translation: 'Перейти к делу', example: 'Let\'s cut to the chase and discuss the plan.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Из кино: перейти к погоне.' },
                        { word: 'Business', translation: 'Бизнес', example: 'Business is booming this year.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Бизнес — двигатель экономики.' },
                        { word: 'Negotiation', translation: 'Переговоры', example: 'The negotiation was successful.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Хорошие переговоры — искусство!' },
                        { word: 'Innovation', translation: 'Инновация', example: 'Innovation drives progress in technology.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Инновации меняют мир!' },
                        { word: 'Leadership', translation: 'Лидерство', example: 'Good leadership inspires teams.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Лидеры меняют историю.' },
                        { word: 'Motivation', translation: 'Мотивация', example: 'Stay motivated to achieve your goals.', img: 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=300', audio: '', fact: 'Мотивация — ключ к действию.' },
                        { word: 'Strategy', translation: 'Стратегия', example: 'We need a better strategy.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', audio: '', fact: 'Стратегия побеждает тактику.' }
                    ],
                    quizzes: [
                        { question: 'Переведи "Under the weather"', answer: 'не в форме', options: ['в хорошей форме', 'не в форме', 'в отпуске', 'в школе'] },
                        { question: 'Переведи "Call it a day"', answer: 'завершить работу', options: ['начать день', 'завершить работу', 'продолжить', 'отменить'] },
                        { question: 'Переведи "Burn the midnight oil"', answer: 'работать допоздна', options: ['спать рано', 'работать допоздна', 'отдыхать', 'играть'] },
                        { question: 'Переведи "Piece of cake"', answer: 'легко как пирог', options: ['трудно', 'легко как пирог', 'средне', 'невозможно'] },
                        { question: 'Переведи "Hit the nail on the head"', answer: 'попасть в точку', options: ['промахнуться', 'попасть в точку', 'игнорировать', 'отложить'] },
                        { question: 'Переведи "Cost an arm and a leg"', answer: 'очень дорого', options: ['дешево', 'очень дорого', 'бесплатно', 'средне'] },
                        { question: 'Переведи "Meeting"', answer: 'встреча', options: ['разговор', 'встреча', 'праздник', 'путешествие'] },
                        { question: 'Переведи "Deadline"', answer: 'срок', options: ['начало', 'срок', 'продолжение', 'окончание'] },
                        { question: 'Переведи "Innovation"', answer: 'инновация', options: ['традиция', 'инновация', 'стабильность', 'хаос'] },
                        { question: 'Переведи "Strategy"', answer: 'стратегия', options: ['тактика', 'стратегия', 'случайность', 'инстинкт'] }
                    ],
                    video: '9bZkp7q19f0'
                }
            },
            math: {
                beginner: {
                    flashcards: [
                        { term: 'Addition', explanation: 'Сложение чисел', example: '2 + 3 = 5', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Сложение коммутативно: a + b = b + a.' },
                        { term: 'Subtraction', explanation: 'Вычитание', example: '5 - 2 = 3', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Вычитание не коммутативно.' },
                        { term: 'Multiplication', explanation: 'Умножение', example: '4 × 3 = 12', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Умножение — повторное сложение.' },
                        { term: 'Division', explanation: 'Деление', example: '12 ÷ 3 = 4', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Деление — обратное умножению.' },
                        { term: 'Number', explanation: 'Число', example: 'The number 10 is even.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Числа — основа математики.' },
                        { term: 'Even', explanation: 'Чётное', example: '2 is even.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Чётные числа делятся на 2.' },
                        { term: 'Odd', explanation: 'Нечётное', example: '3 is odd.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Нечётные числа не делятся на 2.' },
                        { term: 'Fraction', explanation: 'Дробь', example: '1/2 is a half.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Дроби выражают части.' },
                        { term: 'Decimal', explanation: 'Десятичная', example: '0.5 is decimal.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Десятичные — основа счисления.' },
                        { term: 'Percentage', explanation: 'Процент', example: '50% is half.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Процент — сотая часть.' },
                        { term: 'Sum', explanation: 'Сумма', example: 'The sum of 1 and 2 is 3.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Сумма — результат сложения.' },
                        { term: 'Difference', explanation: 'Разность', example: 'The difference between 5 and 2 is 3.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Разность — результат вычитания.' },
                        { term: 'Product', explanation: 'Произведение', example: 'The product of 4 and 3 is 12.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Произведение — результат умножения.' },
                        { term: 'Quotient', explanation: 'Частное', example: 'The quotient of 12 and 3 is 4.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Частное — результат деления.' },
                        { term: 'Zero', explanation: 'Ноль', example: 'Zero is neither even nor odd.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Ноль — нейтральный элемент.' }
                    ],
                    quizzes: [
                        { question: '2 + 2 = ?', answer: '4', options: ['3', '4', '5', '6'] },
                        { question: '5 - 3 = ?', answer: '2', options: ['1', '2', '3', '4'] },
                        { question: '4 × 3 = ?', answer: '12', options: ['10', '12', '14', '16'] },
                        { question: '12 ÷ 4 = ?', answer: '3', options: ['2', '3', '4', '5'] },
                        { question: 'Is 4 even?', answer: 'да', options: ['нет', 'да', 'не знаю', 'возможно'] },
                        { question: 'Is 5 odd?', answer: 'да', options: ['нет', 'да', 'не знаю', 'возможно'] },
                        { question: '1/2 = ?', answer: '0.5', options: ['0.2', '0.5', '1.0', '2.0'] },
                        { question: '50% = ?', answer: '0.5', options: ['0.25', '0.5', '1.0', '0.1'] },
                        { question: 'Sum of 1 and 3?', answer: '4', options: ['3', '4', '5', '2'] },
                        { question: 'Product of 2 and 5?', answer: '10', options: ['7', '10', '12', '8'] }
                    ],
                    video: 'https://www.youtube.com/embed/OK_2zKNjK_4' // Пример для математики
                },
                intermediate: {
                    flashcards: [
                        { term: 'Equation', explanation: 'Уравнение', example: 'x + 2 = 5', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Уравнения решают неизвестные.' },
                        { term: 'Variable', explanation: 'Переменная', example: 'x is a variable.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Переменные обозначают неизвестные.' },
                        { term: 'Triangle', explanation: 'Треугольник', example: 'A triangle has 3 sides.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Сумма углов треугольника 180°.' },
                        { term: 'Circle', explanation: 'Круг', example: 'The circle has radius r.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Площадь круга πr².' },
                        { term: 'Square', explanation: 'Квадрат', example: 'Square has 4 equal sides.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Площадь квадрата a².' },
                        { term: 'Algebra', explanation: 'Алгебра', example: 'Algebra studies variables.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Алгебра — абстрактная математика.' },
                        { term: 'Geometry', explanation: 'Геометрия', example: 'Geometry studies shapes.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Геометрия — наука о фигурах.' },
                        { term: 'Pythagoras', explanation: 'Теорема Пифагора', example: 'a² + b² = c²', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Для прямоугольных треугольников.' },
                        { term: 'Angle', explanation: 'Угол', example: '90° is right angle.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Углы измеряют поворот.' },
                        { term: 'Perimeter', explanation: 'Периметр', example: 'Perimeter of square 4a.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Периметр — сумма сторон.' },
                        { term: 'Area', explanation: 'Площадь', example: 'Area of rectangle ab.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Площадь — мера поверхности.' },
                        { term: 'Volume', explanation: 'Объём', example: 'Volume of cube a³.', img: 'https://images.unsplash.com/photo-1580129477105-8e1a40c4c09a?w=300', fact: 'Объём — мера пространства.' },
                        { term: 'Function', explanation: 'Функция', example: 'f(x) = x²', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Функции описывают зависимости.' },
                        { term: 'Graph', explanation: 'График', example: 'Graph of linear function.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Графики визуализируют функции.' },
                        { term: 'Inequality', explanation: 'Неравенство', example: 'x > 5', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Неравенства описывают диапазоны.' }
                    ],
                    quizzes: [
                        { question: 'Solve x + 3 = 7', answer: '4', options: ['3', '4', '5', '10'] },
                        { question: 'Sum of angles in triangle?', answer: '180°', options: ['90°', '180°', '360°', '270°'] },
                        { question: 'Area of circle formula?', answer: 'πr²', options: ['2πr', 'πr²', 'r²', '4r'] },
                        { question: 'Pythagoras: 3-4-?', answer: '5', options: ['4', '5', '6', '7'] },
                        { question: 'Perimeter of square with side 5?', answer: '20', options: ['10', '20', '25', '15'] },
                        { question: 'f(x) = 2x, f(3)=?', answer: '6', options: ['5', '6', '9', '3'] },
                        { question: 'Right angle is?', answer: '90°', options: ['45°', '90°', '180°', '360°'] },
                        { question: 'Volume of cube side 2?', answer: '8', options: ['4', '8', '6', '12'] },
                        { question: 'Inequality x < 10 means?', answer: 'x меньше 10', options: ['x больше 10', 'x меньше 10', 'x равно 10', 'x не равно 10'] },
                        { question: 'Graph of y = x is?', answer: 'прямая', options: ['парабола', 'прямая', 'круг', 'гипербола'] }
                    ],
                    video: 'https://www.youtube.com/embed/OK_2zKNjK_4'
                },
                advanced: {
                    flashcards: [
                        { term: 'Derivative', explanation: 'Производная', example: 'd/dx (x²) = 2x', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Производная — скорость изменения.' },
                        { term: 'Integral', explanation: 'Интеграл', example: '∫x dx = x²/2', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Интеграл — площадь под кривой.' },
                        { term: 'Limit', explanation: 'Предел', example: 'lim x→0 sin(x)/x = 1', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Предел — значение при приближении.' },
                        { term: 'Matrix', explanation: 'Матрица', example: '2x2 matrix [[1,2],[3,4]]', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Матрицы используются в линейной алгебре.' },
                        { term: 'Vector', explanation: 'Вектор', example: '<1,2,3>', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Векторы имеют направление и длину.' },
                        { term: 'Probability', explanation: 'Вероятность', example: 'P(heads) = 0.5', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Вероятность от 0 до 1.' },
                        { term: 'Statistics', explanation: 'Статистика', example: 'Mean of data set.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Статистика анализирует данные.' },
                        { term: 'Hypothesis', explanation: 'Гипотеза', example: 'Null hypothesis H0.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Гипотезы тестируются статистикой.' },
                        { term: 'Differential Equation', explanation: 'Дифференциальное уравнение', example: 'dy/dx = y', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Описывают изменения.' },
                        { term: 'Series', explanation: 'Серия', example: 'Sum of infinite series.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Серии — суммы бесконечных членов.' },
                        { term: 'Convergence', explanation: 'Сходимость', example: 'Series converges if sum finite.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Сходимость для бесконечных процессов.' },
                        { term: 'Eigenvalue', explanation: 'Собственное значение', example: 'For matrix A.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Используется в анализе.' },
                        { term: 'Determinant', explanation: 'Детерминант', example: 'det(A) for 2x2.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Детерминант показывает обратимость.' },
                        { term: 'Normal Distribution', explanation: 'Нормальное распределение', example: 'Bell curve.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Моделирует многие явления.' },
                        { term: 'Variance', explanation: 'Дисперсия', example: 'Measure of spread.', img: 'https://images.unsplash.com/photo-1635372720855-3d7777c4ff21?w=300', fact: 'Дисперсия — разброс данных.' }
                    ],
                    quizzes: [
                        { question: 'Derivative of x³?', answer: '3x²', options: ['x²', '3x²', '3x³', 'x³'] },
                        { question: 'Integral of 2x dx?', answer: 'x²', options: ['x²', '2x²', 'x', '2x'] },
                        { question: 'lim x→∞ 1/x = ?', answer: '0', options: ['1', '0', '∞', '-∞'] },
                        { question: 'Probability of impossible event?', answer: '0', options: ['1', '0', '0.5', '∞'] },
                        { term: 'Mean of 1,2,3?', answer: '2', options: ['1', '2', '3', '6'] },
                        { question: 'Matrix addition: [[1,0]] + [[0,1]] =?', answer: '[[1,1]]', options: [['[1,0]'], '[[1,1]]', '[[0,0]]', '[[1,2]]'] },
                        { question: 'Variance measures?', answer: 'spread', options: ['center', 'spread', 'shape', 'type'] },
                        { question: 'Normal distribution is?', answer: 'bell-shaped', options: ['flat', 'bell-shaped', 'skewed', 'uniform'] },
                        { question: 'Eigenvalue satisfies?', answer: 'Av = λv', options: ['Av = v', 'Av = λv', 'Av = 0', 'Av = Av'] },
                        { question: 'Determinant of singular matrix?', answer: '0', options: ['1', '0', '∞', 'a'] }
                    ],
                    video: 'https://www.youtube.com/embed/OK_2zKNjK_4'
                }
            },
            history: {
                beginner: {
                    flashcards: [
                        { event: 'Ancient Egypt', explanation: 'Древний Египет', example: 'Built pyramids.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Пирамиды стоят более 4500 лет.' },
                        { event: 'Roman Empire', explanation: 'Римская империя', example: 'Conquered many lands.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Рим — вечный город.' },
                        { event: 'Greek Philosophy', explanation: 'Греческая философия', example: 'Socrates, Plato, Aristotle.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Основы западной мысли.' },
                        { event: 'Invention of Wheel', explanation: 'Изобретение колеса', example: 'Around 3500 BC.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Революционизировало транспорт.' },
                        { event: 'Stone Age', explanation: 'Каменный век', example: 'Use of stone tools.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Первые люди.' },
                        { event: 'Bronze Age', explanation: 'Бронзовый век', example: 'Use of bronze.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Прогресс в металлургии.' },
                        { event: 'Writing Invention', explanation: 'Изобретение письма', example: 'Cuneiform in Mesopotamia.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Начало истории.' },
                        { event: 'Great Wall of China', explanation: 'Великая Китайская стена', example: 'Built to protect from invaders.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Самая длинная стена.' },
                        { event: 'Colosseum', explanation: 'Колизей', example: 'Roman amphitheater.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Для гладиаторских боёв.' },
                        { event: 'Parthenon', explanation: 'Парфенон', example: 'Temple in Athens.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Символ демократии.' },
                        { event: 'Mayan Civilization', explanation: 'Майя', example: 'Advanced calendar.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Точная астрономия.' },
                        { event: 'Vikings', explanation: 'Викинги', example: 'Norse explorers.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Открыли Америку раньше Колумба.' },
                        { event: 'Silk Road', explanation: 'Шёлковый путь', example: 'Trade route.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Связал Восток и Запад.' },
                        { event: 'Hammurabi Code', explanation: 'Кодекс Хаммурапи', example: 'First written laws.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Око за око.' },
                        { event: 'Sphinx', explanation: 'Сфинкс', example: 'Mythical creature in Egypt.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Загадки Сфинкса.' }
                    ],
                    quizzes: [
                        { question: 'Who built the pyramids?', answer: 'Египтяне', options: ['Римляне', 'Греки', 'Египтяне', 'Майя'] },
                        { question: 'Capital of Roman Empire?', answer: 'Рим', options: ['Афины', 'Рим', 'Спарта', 'Вавилон'] },
                        { question: 'Famous Greek philosopher?', answer: 'Сократ', options: ['Цезарь', 'Сократ', 'Ньютон', 'Эйнштейн'] },
                        { question: 'When was the wheel invented?', answer: 'около 3500 до н.э.', options: ['1000 н.э.', 'около 3500 до н.э.', '500 до н.э.', '2000 н.э.'] },
                        { question: 'Stone Age tools made of?', answer: 'камень', options: ['металл', 'камень', 'пластик', 'дерево'] },
                        { question: 'Longest wall in the world?', answer: 'Великая Китайская стена', options: ['Колизей', 'Великая Китайская стена', 'Парфенон', 'Сфинкс'] },
                        { question: 'First written laws?', answer: 'Кодекс Хаммурапи', options: ['Библия', 'Кодекс Хаммурапи', 'Конституция', 'Кодекс Наполеона'] },
                        { question: 'Trade route Silk Road connected?', answer: 'Восток и Запад', options: ['Север и Юг', 'Восток и Запад', 'Африку и Европу', 'Америку и Азию'] },
                        { question: 'Mayan known for?', answer: 'календарь', options: ['пирамиды', 'календарь', 'корабли', 'оружие'] },
                        { question: 'Vikings from?', answer: 'Скандинавия', options: ['Италия', 'Скандинавия', 'Египет', 'Китай'] }
                    ],
                    video: 'https://www.youtube.com/embed/9bZkp7q19f0'
                },
                intermediate: {
                    flashcards: [
                        { event: 'Medieval Knights', explanation: 'Средневековые рыцари', example: 'Code of chivalry.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Рыцари защищали замки.' },
                        { event: 'Black Death', explanation: 'Чёрная смерть', example: 'Plague in 14th century.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Убило 30-60% населения Европы.' },
                        { event: 'Crusades', explanation: 'Крестовые походы', example: 'Wars for Holy Land.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: '9 походов в 11-13 вв.' },
                        { event: 'Magna Carta', explanation: 'Великая хартия вольностей', example: 'Limited king\'s power.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: '1215 год, Англия.' },
                        { event: 'Renaissance', explanation: 'Возрождение', example: 'Art and science revival.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: '14-17 века, Италия.' },
                        { event: 'Leonardo da Vinci', explanation: 'Леонардо да Винчи', example: 'Mona Lisa painter.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', fact: 'Универсальный гений.' },
                        { event: 'Feudalism', explanation: 'Феодализм', example: 'Lord-vassal system.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Средневековая система.' },
                        { event: 'Inquisition', explanation: 'Инквизиция', example: 'Church court.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Боролась с ересью.' },
                        { event: 'Hundred Years\' War', explanation: 'Столетняя война', example: 'England vs France.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: '1337-1453 годы.' },
                        { event: 'Joan of Arc', explanation: 'Жанна д\'Арк', example: 'French heroine.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Сожжена на костре.' },
                        { event: 'Mongol Empire', explanation: 'Монгольская империя', example: 'Largest contiguous empire.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Чингисхан.' },
                        { event: 'Ottoman Empire', explanation: 'Османская империя', example: 'Conquered Constantinople.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', fact: '1453 год.' },
                        { event: 'Printing Press', explanation: 'Печатный станок', example: 'Gutenberg invention.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Революция в книгах.' },
                        { event: 'Columbus Voyage', explanation: 'Путешествие Колумба', example: 'Discovered America 1492.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Искал Индию.' },
                        { event: 'Shakespeare', explanation: 'Шекспир', example: 'Romeo and Juliet author.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Английский поэт.' }
                    ],
                    quizzes: [
                        { question: 'Black Death killed how many?', answer: '30-60% Европы', options: ['10%', '30-60% Европы', '100%', '5%'] },
                        { question: 'Magna Carta year?', answer: '1215', options: ['1066', '1215', '1492', '1789'] },
                        { question: 'Renaissance started in?', answer: 'Италия', options: ['Франция', 'Италия', 'Англия', 'Германия'] },
                        { question: 'Famous da Vinci painting?', answer: 'Мона Лиза', options: ['Звёздная ночь', 'Мона Лиза', 'Сикстинская капелла', 'Подсолнухи'] },
                        { question: 'Hundred Years\' War between?', answer: 'Англия и Франция', options: ['Англия и Франция', 'Франция и Германия', 'Англия и Испания', 'Германия и Италия'] },
                        { question: 'Mongol leader?', answer: 'Чингисхан', options: ['Наполеон', 'Чингисхан', 'Цезарь', 'Александр'] },
                        { question: 'Gutenberg invented?', answer: 'печатный станок', options: ['колесо', 'печатный станок', 'порох', 'компас'] },
                        { question: 'Columbus year?', answer: '1492', options: ['1215', '1492', '1776', '1945'] },
                        { question: 'Shakespeare from?', answer: 'Англия', options: ['Италия', 'Англия', 'Франция', 'Греция'] },
                        { question: 'Feudalism system?', answer: 'феодальная', options: ['демократическая', 'феодальная', 'капиталистическая', 'коммунистическая'] }
                    ],
                    video: 'https://www.youtube.com/embed/9bZkp7q19f0'
                },
                advanced: {
                    flashcards: [
                        { event: 'Industrial Revolution', explanation: 'Промышленная революция', example: '18-19 century, machines.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Изменение производства.' },
                        { event: 'World War I', explanation: 'Первая мировая война', example: '1914-1918.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: '20 млн погибших.' },
                        { event: 'Russian Revolution', explanation: 'Русская революция', example: '1917, Bolsheviks.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Конец царства.' },
                        { event: 'Great Depression', explanation: 'Великая депрессия', example: '1929-1939.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', fact: 'Экономический кризис.' },
                        { event: 'World War II', explanation: 'Вторая мировая война', example: '1939-1945.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Самая кровавая война.' },
                        { event: 'Holocaust', explanation: 'Холокост', example: 'Nazi genocide.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: '6 млн евреев.' },
                        { event: 'Cold War', explanation: 'Холодная война', example: '1947-1991, USA vs USSR.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Идеологический конфликт.' },
                        { event: 'Moon Landing', explanation: 'Высадка на Луну', example: '1969, Apollo 11.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Один маленький шаг.' },
                        { event: 'Fall of Berlin Wall', explanation: 'Падение Берлинской стены', example: '1989.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Конец разделения Германии.' },
                        { event: 'Internet Invention', explanation: 'Изобретение интернета', example: '1960s, ARPANET.', img: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=300', fact: 'Связывает мир.' },
                        { event: 'Civil Rights Movement', explanation: 'Движение за гражданские права', example: '1950s-1960s, USA.', img: 'https://images.unsplash.com/photo-1570549717069-33bede7a2d57?w=300', fact: 'Мартин Лютер Кинг.' },
                        { event: 'Feminism Waves', explanation: 'Волны феминизма', example: 'First wave suffrage.', img: 'https://images.unsplash.com/photo-1506354660007-9d744c9d0c0c?w=300', fact: 'Борьба за равноправие.' },
                        { event: 'Environmental Movement', explanation: 'Экологическое движение', example: 'Earth Day 1970.', img: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300', fact: 'Защита природы.' },
                        { event: '9/11 Attacks', explanation: 'Атаки 11 сентября', example: '2001, USA.', img: 'https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=300', fact: 'Изменение безопасности.' },
                        { event: 'COVID-19 Pandemic', explanation: 'Пандемия COVID-19', example: '2019-ongoing.', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300', fact: 'Глобальный кризис.' }
                    ],
                    quizzes: [
                        { question: 'Industrial Revolution started in?', answer: 'Англия', options: ['Франция', 'Англия', 'США', 'Германия'] },
                        { question: 'WWI ended in?', answer: '1918', options: ['1914', '1918', '1939', '1945'] },
                        { question: 'Russian Revolution year?', answer: '1917', options: ['1905', '1917', '1941', '1991'] },
                        { question: 'Great Depression started?', answer: '1929', options: ['1919', '1929', '1939', '1949'] },
                        { question: 'WWII allies?', answer: 'США, СССР, Великобритания', options: ['Германия, Япония', 'США, СССР, Великобритания', 'Италия, Франция', 'Испания, Португалия'] },
                        { question: 'Moon landing year?', answer: '1969', options: ['1959', '1969', '1979', '1989'] },
                        { question: 'Berlin Wall fell in?', answer: '1989', options: ['1979', '1989', '1999', '1969'] },
                        { question: 'Cold War between?', answer: 'США и СССР', options: ['США и СССР', 'США и Китай', 'СССР и Китай', 'Европа и Азия'] },
                        { question: 'Civil Rights leader?', answer: 'Мартин Лютер Кинг', options: ['Ганди', 'Мартин Лютер Кинг', 'Мандела', 'Ленин'] },
                        { question: '9/11 year?', answer: '2001', options: ['1991', '2001', '2011', '1981'] }
                    ],
                    video: 'https://www.youtube.com/embed/9bZkp7q19f0'
                }
            }
        };

        // Прогресс, избранное, серия (localStorage)
        let progress = JSON.parse(localStorage.getItem('tegyProgress')) || {};
        let favorites = JSON.parse(localStorage.getItem('tegyFavorites')) || {};
        let streak = parseInt(localStorage.getItem('tegyStreak')) || 0;
        let lastDaily = localStorage.getItem('tegyLastDaily') || new Date().toDateString();

        // Функции (обновлённые для поддержки новых уроков)
        function generateFlashcards(subject, level) {
            const container = document.getElementById(`flashcards-${subject}-${level}`);
            container.innerHTML = '';
            subjects[subject][level].flashcards.forEach((card, index) => {
                const div = document.createElement('div');
                div.className = 'flashcard';
                div.dataset.key = `${subject}-${level}-${index}`;
                const term = card.word || card.term || card.event;
                const expl = card.translation || card.explanation;
                div.innerHTML = `
                    <button class="favorite-btn" onclick="toggleFavorite('${subject}', '${level}', ${index})" style="color: ${favorites[div.dataset.key] ? 'red' : 'black'}">❤️</button>
                    <img src="${card.img}" alt="${term}" loading="lazy">
                    <p><strong>${card.word ? 'Word' : card.term ? 'Term' : 'Event'}:</strong> ${term}</p>
                    <p><strong>${card.translation ? 'Translation' : 'Explanation'}:</strong> ${expl}</p>
                    <p><strong>Example:</strong> ${card.example}</p>
                    <p><strong>Fun Fact:</strong> ${card.fact}</p>
                    <button class="speak-btn" onclick="speakText('${term}')"><i class="fas fa-volume-up"></i></button>
                    ${card.audio ? `<audio controls src="${card.audio}">Произношение</audio>` : ''}
                `;
                container.appendChild(div);
            });
            if (subjects[subject][level].video) {
                container.innerHTML += `<iframe src="${subjects[subject][level].video}" frameborder="0" allowfullscreen></iframe>`;
            }
        }

        function generateQuizzes(subject, level) {
            const container = document.getElementById(`quizzes-${subject}-${level}`);
            container.innerHTML = '<h3>Квиз (множественный выбор)</h3>';
            const shuffled = [...subjects[subject][level].quizzes].sort(() => 0.5 - Math.random()).slice(0, 10); // 10 вопросов
            shuffled.forEach((q, index) => {
                const id = `${subject}-${level}-${index + 1}`;
                let optionsHtml = q.options.map(opt => `<div class="quiz-option" onclick="checkQuizOption('${id}', '${q.answer}', '${opt}', '${subject}', '${level}')">${opt}</div>`).join('');
                container.innerHTML += `
                    <p>Вопрос ${index + 1}: ${q.question}</p>
                    <div class="quiz-options">${optionsHtml}</div>
                    <p id="result-${id}" class="result"></p>
                `;
            });
        }

        function showLevel(subject, level) {
            hideLevels(subject);
            document.getElementById(`${subject}-${level}-level`).style.display = 'block';
            generateFlashcards(subject, level);
            generateQuizzes(subject, level);
            updateProgress(subject, level);
            showDailyChallenge(subject);
            window.scrollTo(0, 0);
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            localStorage.setItem('tegyTheme', document.body.classList.contains('dark') ? 'dark' : 'light');
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
            document.getElementById(`${sectionId}-section || main-menu`).style.display = 'block';
            if (sectionId === 'profile') updateProfile();
            if (['english', 'math', 'history'].includes(sectionId)) {
                Telegram.WebApp.MainButton.show();
                hideLevels(sectionId);
            } else {
                Telegram.WebApp.MainButton.hide();
            }
        }

        function showMainMenu() {
            document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
            document.getElementById('main-menu').style.display = 'block';
            Telegram.WebApp.MainButton.hide();
            checkStreak();
        }

        function hideLevels(subject) {
            document.querySelectorAll(`#${subject}-section .level-section`).forEach(sec => sec.style.display = 'none');
        }

        function repeatLevel(subject, level) {
            const key = `${subject}-${level}`;
            progress[key] = 0;
            localStorage.setItem('tegyProgress', JSON.stringify(progress));
            showLevel(subject, level);
        }

        function updateProgress(subject, level) {
            const key = `${subject}-${level}`;
            if (!progress[key]) progress[key] = 0;
            const fill = document.getElementById(`progress-${key}`);
            const quizCount = subjects[subject][level].quizzes.length;
            const percent = Math.min((progress[key] / quizCount * 100), 100);
            fill.style.width = `${percent}%`;
            const award = document.getElementById(`award-${key}`);
            const nextBtn = document.getElementById(`next-${key}`);
            if (percent >= 100) {
                award.style.display = 'block';
                nextBtn.style.display = 'block';
                Telegram.WebApp.sendData(JSON.stringify({ award: key, status: 'completed' }));
            } else {
                award.style.display = 'none';
                nextBtn.style.display = 'none';
            }
        }

        function searchFlashcards(subject) {
            const searchTerm = document.getElementById(`search-${subject}`).value.toLowerCase();
            document.querySelectorAll(`#${subject}-section .flashcard`).forEach(card => {
                card.style.display = card.innerText.toLowerCase().includes(searchTerm) ? 'block' : 'none';
            });
        }

        function checkQuizOption(quizId, correctAnswer, selected, subject, level) {
            const result = document.getElementById(`result-${quizId}`);
            if (selected.toLowerCase().trim() === correctAnswer.toLowerCase().trim()) {
                result.innerText = 'Правильно! 🎉';
                result.style.color = 'green';
                Telegram.WebApp.HapticFeedback.impactOccurred('light');
                progress[`${subject}-${level}`] = (progress[`${subject}-${level}`] || 0) + 1;
                localStorage.setItem('tegyProgress', JSON.stringify(progress));
                updateProgress(subject, level);
                createConfetti();
                Telegram.WebApp.sendData(JSON.stringify({ quiz: subject, level, status: 'correct' }));
            } else {
                result.innerText = `Неправильно. Правильный ответ: ${correctAnswer}`;
                result.style.color = 'red';
                Telegram.WebApp.HapticFeedback.notificationOccurred('error');
                Telegram.WebApp.sendData(JSON.stringify({ quiz: subject, level, status: 'incorrect' }));
            }
        }

        function createConfetti() {
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = `${Math.random() * 1.5 + 0.5}s`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 2000);
            }
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                speechSynthesis.speak(utterance);
            } else {
                alert('Речь не поддерживается в этом браузере.');
            }
        }

        function toggleFavorite(subject, level, index) {
            const key = `${subject}-${level}-${index}`;
            favorites[key] = !favorites[key];
            localStorage.setItem('tegyFavorites', JSON.stringify(favorites));
            const btn = event.target;
            btn.style.color = favorites[key] ? 'red' : 'black';
            updateFavorites(subject);
        }

        function updateFavorites(subject) {
            const container = document.getElementById(`favorites-${subject}`);
            container.innerHTML = '<h3>Избранные карточки</h3>';
            let hasFavorites = false;
            subjects[subject].beginner.flashcards.forEach((_, i) => {
                const key = `${subject}-beginner-${i}`;
                if (favorites[key]) {
                    const card = subjects[subject].beginner.flashcards[i];
                    const div = document.createElement('div');
                    div.className = 'flashcard';
                    div.innerHTML = `<p><strong>${card.word || card.term || card.event}:</strong> ${card.translation || card.explanation}</p><p>${card.example}</p>`;
                    container.appendChild(div);
                    hasFavorites = true;
                }
            });
            // Аналогично для других уровней
            if (!hasFavorites) container.innerHTML += '<p>Нет избранных карточек.</p>';
        }

        function showDailyChallenge(subject) {
            const today = new Date().toDateString();
            if (lastDaily !== today) {
                streak++;
                localStorage.setItem('tegyStreak', streak.toString());
                lastDaily = today;
                localStorage.setItem('tegyLastDaily', today);
            }
            const challengeDiv = document.getElementById(`daily-challenge-${subject}`);
            challengeDiv.style.display = 'block';
            // Простая генерация ежедневного вызова
            const quizzes = subjects[subject].beginner.quizzes[Math.floor(Math.random() * subjects[subject].beginner.quizzes.length)];
            document.getElementById(`daily-${subject}-question || daily-word || daily-math-question || daily-history-question`).innerText = quizzes.question;
            // Для checkDaily использовать quizzes.answer
        }

        function checkDaily(subject) {
            // Упрощённая проверка, предполагая daily-question установлен
            const inputId = `daily-${subject}-input || daily-input`;
            const resultId = `daily-${subject}-result || daily-result`;
            // Здесь нужно хранить правильный ответ, для простоты - пример
            const input = document.getElementById(inputId);
            const result = document.getElementById(resultId);
            if (input.value.trim().toLowerCase() === 'correct example') { // Заменить на реальную логику
                result.innerText = 'Правильно! 🎉';
                result.style.color = 'green';
                createConfetti();
            } else {
                result.innerText = 'Неправильно. Попробуй снова!';
                result.style.color = 'red';
            }
        }

        function checkStreak() {
            const today = new Date().toDateString();
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            if (lastDaily !== yesterday.toDateString()) {
                streak = 0;
            }
            localStorage.setItem('tegyStreak', streak.toString());
        }

        function updateProfile() {
            const progressList = document.getElementById('profile-progress');
            progressList.innerHTML = '';
            ['english', 'math', 'history'].forEach(sub => {
                ['beginner', 'intermediate', 'advanced'].forEach(lvl => {
                    const key = `${sub}-${lvl}`;
                    const li = document.createElement('li');
                    const total = subjects[sub][lvl].quizzes.length;
                    li.innerText = `${sub} ${lvl}: ${progress[key] || 0} / ${total}`;
                    progressList.appendChild(li);
                });
            });
            const badges = document.getElementById('profile-badges');
            badges.innerHTML = streak > 7 ? '<span class="badge">🔥</span>' : '<span class="badge">⭐</span>';
            document.getElementById('streak-counter').innerText = streak;
        }

        function shareProgress() {
            const text = `Мой прогресс в Tegy S: серия ${streak} дней! Пройдено множество уроков по английскому, математике и истории.`;
            if (Telegram.WebApp) {
                Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=&text=${encodeURIComponent(text)}`);
            }
        }

        // Инициализация
        function init() {
            if (localStorage.getItem('tegyTheme') === 'dark') {
                document.body.classList.add('dark');
            }
            ['english', 'math', 'history'].forEach(sub => updateFavorites(sub));
            showMainMenu();
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
