<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tegy S - –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ë–æ—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <!-- –ò–∫–æ–Ω–∫–∏ -->
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            overflow-y: auto;
            animation: fadeIn 1s ease-in-out;
            transition: background 0.5s;
        }
        body.dark {
            background: linear-gradient(135deg, #1e1e1e 0%, #333 100%);
            color: #ddd;
        }
        @keyframes fadeIn {
            from { opacity: 0; } to { opacity: 1; }
        }
        h1 {
            font-size: 2.5em;
            margin: 20px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; }
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            animation: cardAppear 0.8s ease-in-out;
        }
        body.dark .section {
            background: rgba(0, 0, 0, 0.3);
        }
        @keyframes cardAppear {
            from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; }
        }
        .button {
            background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);
            border: none;
            border-radius: 10px;
            color: #fff;
            padding: 15px 30px;
            font-size: 1.2em;
            margin: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); }
        }
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .flashcard {
            background: #fff;
            color: #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s;
        }
        .flashcard:hover {
            transform: translateY(-5px);
        }
        body.dark .flashcard {
            background: #444;
            color: #fff;
        }
        .flashcard img {
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 10px;
            loading: lazy;
        }
        .quiz-input {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border: none;
            width: 80%;
        }
        .result {
            font-size: 1.2em;
            margin-top: 10px;
        }
        .about-text {
            font-size: 1em;
            line-height: 1.5;
        }
        .level-section {
            display: none;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f00;
            animation: confetti-fall 1s linear;
        }
        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        .progress-bar {
            background: #ddd;
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .progress-fill {
            background: #4caf50;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }
        .award {
            font-size: 2em;
            animation: bounce 1s;
        }
        @keyframes bounce {
            0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); }
        }
        .search-input {
            padding: 10px;
            width: 80%;
            margin-bottom: 10px;
            border-radius: 5px;
            border: none;
        }
        iframe {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Tegy S: –û–±—É—á–µ–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º</h1>
    
    <div id="main-menu" class="section">
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è:</p>
        <button class="button" onclick="showSection('english')"><i class="fas fa-book"></i> –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</button>
        <button class="button" onclick="showSection('about')"><i class="fas fa-info-circle"></i> –û –Ω–∞—Å</button>
        <button class="button" onclick="toggleTheme()"><i class="fas fa-moon"></i> –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>
        <!-- –î–æ–±–∞–≤—å—Ç–µ –∑–¥–µ—Å—å –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π -->
    </div>
    
    <div id="english-section" class="section" style="display: none;">
        <h2>–£—Ä–æ–∫–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</h2>
        <input type="text" class="search-input" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–ª–æ–≤–∞–º..." oninput="searchFlashcards()">
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å:</p>
        <button class="button" onclick="showLevel('beginner')"><i class="fas fa-star"></i> Beginner (–ù–∞—á–∏–Ω–∞—é—â–∏–π)</button>
        <button class="button" onclick="showLevel('intermediate')"><i class="fas fa-star-half-alt"></i> Intermediate (–°—Ä–µ–¥–Ω–∏–π)</button>
        <button class="button" onclick="showLevel('advanced')"><i class="fas fa-star"></i> Advanced (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)</button>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —É—Ä–æ–≤–Ω–µ–π (–∫–æ–Ω—Ç–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏) -->
        <div id="beginner-level" class="level-section">
            <h3>Beginner: –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ª–æ–≤–∞ –∏ —Ñ—Ä–∞–∑—ã</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-beginner" style="width: 0%;"></div></div>
            <div id="flashcards-beginner"></div>
            <div id="quizzes-beginner"></div>
            <div id="award-beginner" style="display: none;"><span class="award">üèÜ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</span></div>
            <button class="button" onclick="repeatLevel('beginner')">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
            <button class="button" style="display: none;" id="next-beginner" onclick="showLevel('intermediate')">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å: Intermediate</button>
            <button class="button" onclick="hideLevels()">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–≤–Ω—è–º</button>
        </div>
        
        <div id="intermediate-level" class="level-section">
            <h3>Intermediate: –§—Ä–∞–∑—ã –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-intermediate" style="width: 0%;"></div></div>
            <div id="flashcards-intermediate"></div>
            <div id="quizzes-intermediate"></div>
            <div id="award-intermediate" style="display: none;"><span class="award">üèÜ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</span></div>
            <button class="button" onclick="repeatLevel('intermediate')">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
            <button class="button" style="display: none;" id="next-intermediate" onclick="showLevel('advanced')">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å: Advanced</button>
            <button class="button" onclick="hideLevels()">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–≤–Ω—è–º</button>
        </div>
        
        <div id="advanced-level" class="level-section">
            <h3>Advanced: –ò–¥–∏–æ–º—ã –∏ —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h3>
            <div class="progress-bar"><div class="progress-fill" id="progress-advanced" style="width: 0%;"></div></div>
            <div id="flashcards-advanced"></div>
            <div id="quizzes-advanced"></div>
            <div id="award-advanced" style="display: none;"><span class="award">üèÜ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</span></div>
            <button class="button" onclick="repeatLevel('advanced')">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
            <button class="button" style="display: none;" id="next-advanced" onclick="showMainMenu()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é)</button>
            <button class="button" onclick="hideLevels()">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–≤–Ω—è–º</button>
        </div>
    </div>
    
    <div id="about-section" class="section" style="display: none;">
        <h2>–û –Ω–∞—Å</h2>
        <p class="about-text">Tegcompany ‚Äî –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –≤ –†–µ—Å–ø—É–±–ª–∏–∫–µ –ë–µ–ª–∞—Ä—É—Å—å –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–º –Æ—Ä–∫–µ–≤–∏—á–µ–º –ê—Ä—Ç—ë–º–æ–º –ò–≥–æ—Ä–µ–≤–∏—á–µ–º. –° –º–æ–º–µ–Ω—Ç–∞ —Å–≤–æ–µ–≥–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—è Tegcompany —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–ª–∞—Å—å –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –Ω–∞—á–∞–≤ —Å —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤—ã—Ö —á–∞—Ç-–±–æ—Ç–æ–≤ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ ‚Äî Tegych P –∏ Beeprav P. –≠—Ç–∏ –ø—Ä–æ–µ–∫—Ç—ã —Å—Ç–∞–ª–∏ –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏, –∑–∞–ª–æ–∂–∏–≤ –æ—Å–Ω–æ–≤—É –¥–ª—è –±—É–¥—É—â–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤.</p>
        <button class="button" onclick="showMainMenu()">–ù–∞–∑–∞–¥</button>
    </div>
    
    <script>
        // –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
        const initData = Telegram.WebApp.initDataUnsafe;
        if (!initData || !initData.user) {
            document.body.innerHTML = '<p style="color: white; text-align: center;">–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram!</p>';
        } else {
            Telegram.WebApp.ready();
            Telegram.WebApp.MainButton.text = '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é';
            Telegram.WebApp.MainButton.onClick(() => showMainMenu());
            Telegram.WebApp.MainButton.show();
        }

        // –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–æ–≤ (–º–∞—Å—Å–∏–≤—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
        const lessons = {
            beginner: {
                flashcards: [
                    { word: 'Apple', translation: '–Ø–±–ª–æ–∫–æ', example: 'I eat an apple every day.', img: 'https://via.placeholder.com/300?text=Apple', audio: 'https://example.com/audio/apple.mp3', fact: '–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ Apple ‚Äî —ç—Ç–æ —Ç–∞–∫–∂–µ –∫–æ–º–ø–∞–Ω–∏—è?' },
                    { word: 'Hello', translation: '–ü—Ä–∏–≤–µ—Ç', example: 'Hello, how are you?', img: 'https://via.placeholder.com/300?text=Hello', audio: 'https://example.com/audio/hello.mp3', fact: 'Hello –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 100+ —è–∑—ã–∫–∞—Ö!' },
                    { word: 'Book', translation: '–ö–Ω–∏–≥–∞', example: 'I read a book.', img: 'https://via.placeholder.com/300?text=Book', audio: 'https://example.com/audio/book.mp3', fact: '–ö–Ω–∏–≥–∏ ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± —É—á–∏—Ç—å —è–∑—ã–∫!' },
                    { word: 'Cat', translation: '–ö–æ—Ç', example: 'The cat is sleeping.', img: 'https://via.placeholder.com/300?text=Cat', audio: 'https://example.com/audio/cat.mp3', fact: '–ö–æ—Ç—ã —Å–ø—è—Ç 16 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å!' },
                    { word: 'House', translation: '–î–æ–º', example: 'My house is big.', img: 'https://via.placeholder.com/300?text=House', audio: 'https://example.com/audio/house.mp3', fact: '–î–æ–º ‚Äî —Ç–∞–º, –≥–¥–µ —Å–µ—Ä–¥—Ü–µ.' },
                    { word: 'Coffee', translation: '–ö–æ—Ñ–µ', example: 'I drink coffee in the morning.', img: 'https://via.placeholder.com/300?text=Coffee', audio: 'https://example.com/audio/coffee.mp3', fact: '–ö–æ—Ñ–µ ‚Äî –≤—Ç–æ—Ä–æ–π —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ –≤ –º–∏—Ä–µ!' },
                    { word: 'Pizza', translation: '–ü–∏—Ü—Ü–∞', example: 'I like pizza with cheese.', img: 'https://via.placeholder.com/300?text=Pizza', audio: 'https://example.com/audio/pizza.mp3', fact: '–ü–∏—Ü—Ü–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∞ –≤ –ò—Ç–∞–ª–∏–∏!' },
                    { word: 'Breakfast', translation: '–ó–∞–≤—Ç—Ä–∞–∫', example: 'Breakfast is important.', img: 'https://via.placeholder.com/300?text=Breakfast', audio: 'https://example.com/audio/breakfast.mp3', fact: '–ó–∞–≤—Ç—Ä–∞–∫ –¥–∞—ë—Ç —ç–Ω–µ—Ä–≥–∏—é –Ω–∞ –¥–µ–Ω—å!' },
                    { word: 'Juice', translation: '–°–æ–∫', example: 'I drink orange juice.', img: 'https://via.placeholder.com/300?text=Juice', audio: 'https://example.com/audio/juice.mp3', fact: '–°–æ–∫ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è!' },
                    { word: 'Fruit', translation: '–§—Ä—É–∫—Ç', example: 'Fruit is healthy.', img: 'https://via.placeholder.com/300?text=Fruit', audio: 'https://example.com/audio/fruit.mp3', fact: '–ï—à—å—Ç–µ 5 —Ñ—Ä—É–∫—Ç–æ–≤ –≤ –¥–µ–Ω—å!' }
                ],
                quizzes: [
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Dog"', answer: '—Å–æ–±–∞–∫–∞' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Thank you"', answer: '—Å–ø–∞—Å–∏–±–æ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Water"', answer: '–≤–æ–¥–∞' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Friend"', answer: '–¥—Ä—É–≥' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Eat"', answer: '–µ—Å—Ç—å' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Morning"', answer: '—É—Ç—Ä–æ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Tea"', answer: '—á–∞–π' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Bread"', answer: '—Ö–ª–µ–±' }
                ],
                video: 'dQw4w9WgXcQ' // ID YouTube (–∑–∞–º–µ–Ω–∏—Ç–µ)
            },
            intermediate: {
                flashcards: [
                    { word: 'Weather', translation: '–ü–æ–≥–æ–¥–∞', example: 'What\'s the weather like?', img: 'https://via.placeholder.com/300?text=Weather', audio: 'https://example.com/audio/weather.mp3', fact: '–ü–æ–≥–æ–¥–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!' },
                    { word: 'Travel', translation: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å', example: 'I love to travel.', img: 'https://via.placeholder.com/300?text=Travel', audio: 'https://example.com/audio/travel.mp3', fact: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è —Ä–∞—Å—à–∏—Ä—è—é—Ç –∫—Ä—É–≥–æ–∑–æ—Ä!' },
                    { word: 'Restaurant', translation: '–†–µ—Å—Ç–æ—Ä–∞–Ω', example: 'Let\'s go to a restaurant.', img: 'https://via.placeholder.com/300?text=Restaurant', audio: 'https://example.com/audio/restaurant.mp3', fact: '–í —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö –ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤—ã–µ –±–ª—é–¥–∞!' },
                    { word: 'Nice to meet you', translation: '–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è', example: 'Nice to meet you!', img: 'https://via.placeholder.com/300?text=Meeting', audio: 'https://example.com/audio/nice_to_meet_you.mp3', fact: '–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—Ä–∞–∑–∞ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.' },
                    { word: 'Question', translation: '–í–æ–ø—Ä–æ—Å', example: 'Do you have any questions?', img: 'https://via.placeholder.com/300?text=Question', audio: 'https://example.com/audio/question.mp3', fact: '–í–æ–ø—Ä–æ—Å—ã ‚Äî –∫–ª—é—á –∫ –∑–Ω–∞–Ω–∏—è–º!' },
                    { word: 'Friend', translation: '–î—Ä—É–≥', example: 'My best friend.', img: 'https://via.placeholder.com/300?text=Friend', audio: 'https://example.com/audio/friend.mp3', fact: '–î—Ä—É–∑—å—è ‚Äî —ç—Ç–æ —Å–µ–º—å—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –≤—ã–±–∏—Ä–∞–µ–º.' },
                    { word: 'Job', translation: '–†–∞–±–æ—Ç–∞', example: 'I have a new job.', img: 'https://via.placeholder.com/300?text=Job', audio: 'https://example.com/audio/job.mp3', fact: '–†–∞–±–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å!' },
                    { word: 'What time is it?', translation: '–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?', example: 'What time is it? It\'s 3 PM.', img: 'https://via.placeholder.com/300?text=Time', audio: 'https://example.com/audio/time.mp3', fact: '–í—Ä–µ–º—è ‚Äî –¥–µ–Ω—å–≥–∏!' },
                    { word: 'School', translation: '–®–∫–æ–ª–∞', example: 'I go to school.', img: 'https://via.placeholder.com/300?text=School', audio: 'https://example.com/audio/school.mp3', fact: '–®–∫–æ–ª–∞ ‚Äî –æ—Å–Ω–æ–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.' },
                    { word: 'Vacation', translation: '–û—Ç–ø—É—Å–∫', example: 'I\'m on vacation.', img: 'https://via.placeholder.com/300?text=Vacation', audio: 'https://example.com/audio/vacation.mp3', fact: '–û—Ç–ø—É—Å–∫ –Ω—É–∂–µ–Ω –¥–ª—è –æ—Ç–¥—ã—Ö–∞!' },
                    { word: 'Hobby', translation: '–•–æ–±–±–∏', example: 'My hobby is reading.', img: 'https://via.placeholder.com/300?text=Hobby', audio: 'https://example.com/audio/hobby.mp3', fact: '–•–æ–±–±–∏ –¥–µ–ª–∞–µ—Ç –∂–∏–∑–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π!' }
                ],
                quizzes: [
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "I would like to order"', answer: '—è –±—ã —Ö–æ—Ç–µ–ª –∑–∞–∫–∞–∑–∞—Ç—å' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Excuse me"', answer: '–∏–∑–≤–∏–Ω–∏—Ç–µ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Appointment"', answer: '–≤—Å—Ç—Ä–µ—á–∞' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "I\'m sorry"', answer: '–∏–∑–≤–∏–Ω–∏—Ç–µ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Weekend"', answer: '–≤—ã—Ö–æ–¥–Ω—ã–µ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Favorite"', answer: '–ª—é–±–∏–º—ã–π' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Hotel"', answer: '–æ—Ç–µ–ª—å' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Ticket"', answer: '–±–∏–ª–µ—Ç' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Map"', answer: '–∫–∞—Ä—Ç–∞' }
                ],
                video: 'M7lc1UVf-VE' // ID YouTube (–∑–∞–º–µ–Ω–∏—Ç–µ)
            },
            advanced: {
                flashcards: [
                    { word: 'Break a leg', translation: '–ù–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞', example: 'Break a leg on your exam!', img: 'https://via.placeholder.com/300?text=Break a leg', audio: 'https://example.com/audio/breakaleg.mp3', fact: '–≠—Ç–æ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è –∏–¥–∏–æ–º–∞ –¥–ª—è —É–¥–∞—á–∏!' },
                    { word: 'Piece of cake', translation: '–õ–µ–≥–∫–æ, –∫–∞–∫ –ø–∏—Ä–æ–≥', example: 'The test was a piece of cake.', img: 'https://via.placeholder.com/300?text=Piece of cake', audio: 'https://example.com/audio/pieceofcake.mp3', fact: '–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –ª—ë–≥–∫–∏—Ö –∑–∞–¥–∞—á.' },
                    { word: 'Hit the books', translation: '–ó–∞—Å–µ—Å—Ç—å –∑–∞ –∫–Ω–∏–≥–∏', example: 'I need to hit the books.', img: 'https://via.placeholder.com/300?text=Hit the books', audio: 'https://example.com/audio/hitthebooks.mp3', fact: '–ò–¥–∏–æ–º–∞ –¥–ª—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —É—á—ë–±—ã.' },
                    { word: 'Opportunity', translation: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å', example: 'This is a great opportunity.', img: 'https://via.placeholder.com/300?text=Opportunity', audio: 'https://example.com/audio/opportunity.mp3', fact: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º.' },
                    { word: 'Challenge', translation: '–í—ã–∑–æ–≤', example: 'The project was a challenge.', img: 'https://via.placeholder.com/300?text=Challenge', audio: 'https://example.com/audio/challenge.mp3', fact: '–í—ã–∑–æ–≤—ã –¥–µ–ª–∞—é—Ç –Ω–∞—Å —Å–∏–ª—å–Ω–µ–µ!' },
                    { word: 'Success', translation: '–£—Å–ø–µ—Ö', example: 'Hard work leads to success.', img: 'https://via.placeholder.com/300?text=Success', audio: 'https://example.com/audio/success.mp3', fact: '–£—Å–ø–µ—Ö ‚Äî 1% –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è, 99% –ø–æ—Ç–∞.' },
                    { word: 'Burn the midnight oil', translation: '–†–∞–±–æ—Ç–∞—Ç—å –¥–æ–ø–æ–∑–¥–Ω–∞', example: 'I burned the midnight oil.', img: 'https://via.placeholder.com/300?text=Burn the midnight oil', audio: 'https://example.com/audio/burnmidnightoil.mp3', fact: '–ò–¥–∏–æ–º–∞ –∏–∑ —ç–ø–æ—Ö–∏ –ª–∞–º–ø!' },
                    { word: 'Think outside the box', translation: '–ú—ã—Å–ª–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ', example: 'Think outside the box for solutions.', img: 'https://via.placeholder.com/300?text=Think outside the box', audio: 'https://example.com/audio/thinkoutsidethebox.mp3', fact: '–ö–ª—é—á –∫ –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º!' },
                    { word: 'Cut to the chase', translation: '–ü–µ—Ä–µ–π—Ç–∏ –∫ –¥–µ–ª—É', example: 'Let\'s cut to the chase.', img: 'https://via.placeholder.com/300?text=Cut to the chase', audio: 'https://example.com/audio/cuttothechase.mp3', fact: '–ò–∑ –∫–∏–Ω–æ: –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–≥–æ–Ω–µ.' },
                    { word: 'Business', translation: '–ë–∏–∑–Ω–µ—Å', example: 'Business is booming.', img: 'https://via.placeholder.com/300?text=Business', audio: 'https://example.com/audio/business.mp3', fact: '–ë–∏–∑–Ω–µ—Å ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å —ç–∫–æ–Ω–æ–º–∏–∫–∏.' },
                    { word: 'Negotiation', translation: '–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã', example: 'The negotiation was successful.', img: 'https://via.placeholder.com/300?text=Negotiation', audio: 'https://example.com/audio/negotiation.mp3', fact: '–•–æ—Ä–æ—à–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã ‚Äî –∏—Å–∫—É—Å—Å—Ç–≤–æ!' },
                    { word: 'Innovation', translation: '–ò–Ω–Ω–æ–≤–∞—Ü–∏—è', example: 'Innovation drives progress.', img: 'https://via.placeholder.com/300?text=Innovation', audio: 'https://example.com/audio/innovation.mp3', fact: '–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –º–µ–Ω—è—é—Ç –º–∏—Ä!' }
                ],
                quizzes: [
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Under the weather"', answer: '–Ω–µ –≤ —Ñ–æ—Ä–º–µ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Call it a day"', answer: '–∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Burn the midnight oil"', answer: '—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ø–æ–∑–¥–Ω–∞' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Piece of cake"', answer: '–ª–µ–≥–∫–æ –∫–∞–∫ –ø–∏—Ä–æ–≥' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Hit the nail on the head"', answer: '–ø–æ–ø–∞—Å—Ç—å –≤ —Ç–æ—á–∫—É' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Cost an arm and a leg"', answer: '–æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Meeting"', answer: '–≤—Å—Ç—Ä–µ—á–∞' },
                    { question: '–ü–µ—Ä–µ–≤–µ–¥–∏ "Deadline"', answer: '—Å—Ä–æ–∫' }
                ],
                video: '9bZkp7q19f0' // ID YouTube (–∑–∞–º–µ–Ω–∏—Ç–µ)
            }
        };

        // –ü—Ä–æ–≥—Ä–µ—Å—Å (—Å localStorage)
        let progress = JSON.parse(localStorage.getItem('tegyProgress')) || { beginner: 0, intermediate: 0, advanced: 0 };

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ flashcards
        function generateFlashcards(level) {
            const container = document.getElementById(`flashcards-${level}`);
            container.innerHTML = '';
            lessons[level].flashcards.forEach(card => {
                const div = document.createElement('div');
                div.className = 'flashcard';
                div.innerHTML = `
                    <img src="${card.img}" alt="${card.word}" loading="lazy">
                    <p><strong>Word/Phrase:</strong> ${card.word}</p>
                    <p><strong>Translation:</strong> ${card.translation}</p>
                    <p><strong>Example:</strong> ${card.example}</p>
                    <p><strong>Fun Fact:</strong> ${card.fact}</p>
                    <audio controls src="${card.audio}">–ü—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ</audio>
                `;
                container.appendChild(div);
            });
            // –í–∏–¥–µ–æ
            container.innerHTML += `<iframe src="https://www.youtube.com/embed/${lessons[level].video}" frameborder="0" allowfullscreen></iframe>`;
        }

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö –∫–≤–∏–∑–æ–≤ (3‚Äì5 —Å–ª—É—á–∞–π–Ω—ã—Ö)
        function generateQuizzes(level) {
            const container = document.getElementById(`quizzes-${level}`);
            container.innerHTML = '<h3>–ö–≤–∏–∑ (—Å–ª—É—á–∞–π–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã)</h3>';
            const shuffled = lessons[level].quizzes.sort(() => 0.5 - Math.random()).slice(0, 5); // 5 —Å–ª—É—á–∞–π–Ω—ã—Ö
            shuffled.forEach((q, index) => {
                const id = `${level}-${index + 1}`;
                container.innerHTML += `
                    <p>–í–æ–ø—Ä–æ—Å ${index + 1}: ${q.question}</p>
                    <input type="text" id="quiz-${id}" class="quiz-input" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)">
                    <button class="button" onclick="checkQuiz('${id}', '${q.answer}', '${level}')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <p id="result-${id}" class="result"></p>
                `;
            });
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —É—Ä–æ–≤–Ω—è
        function showLevel(level) {
            hideLevels();
            const section = document.getElementById(`${level}-level`);
            section.style.display = 'block';
            generateFlashcards(level);
            generateQuizzes(level);
            updateProgress(level);
            window.scrollTo(0, 0); // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–≤–µ—Ä—Ö
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function toggleTheme() {
            try {
                document.body.classList.toggle('dark');
                localStorage.setItem('tegyTheme', document.body.classList.contains('dark') ? 'dark' : 'light');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Ç–µ–º—ã:', e);
            }
        }

        function showSection(sectionId) {
            try {
                document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
                document.getElementById(`${sectionId}-section`).style.display = 'block';
                Telegram.WebApp.MainButton.text = '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é';
                if (sectionId !== 'english') hideLevels();
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:', e);
            }
        }

        function showMainMenu() {
            try {
                document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
                document.getElementById('main-menu').style.display = 'block';
                Telegram.WebApp.MainButton.hide();
                hideLevels();
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –º–µ–Ω—é:', e);
            }
        }

        function hideLevels() {
            document.querySelectorAll('.level-section').forEach(sec => sec.style.display = 'none');
        }

        // –ü–æ–≤—Ç–æ—Ä —É—Ä–æ–≤–Ω—è
        function repeatLevel(level) {
            progress[level] = 0;
            localStorage.setItem('tegyProgress', JSON.stringify(progress));
            showLevel(level);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress(level) {
            const fill = document.getElementById(`progress-${level}`);
            const quizCount = document.querySelectorAll(`#quizzes-${level} .quiz-input`).length;
            const percent = (progress[level] / quizCount * 100) || 0;
            fill.style.width = `${percent}%`;
            if (percent >= 100) {
                document.getElementById(`award-${level}`).style.display = 'block';
                document.getElementById(`next-${level}`).style.display = 'block';
                Telegram.WebApp.sendData(JSON.stringify({ award: level, status: 'completed' })); // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–≥—Ä–∞–¥—ã –±–æ—Ç—É
            } else {
                document.getElementById(`award-${level}`).style.display = 'none';
                document.getElementById(`next-${level}`).style.display = 'none';
            }
        }

        // –ü–æ–∏—Å–∫ –ø–æ flashcards
        function searchFlashcards() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            document.querySelectorAll('.flashcard').forEach(card => {
                const text = card.innerText.toLowerCase();
                card.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∏–∑–∞
        function checkQuiz(quizId, correctAnswer, level) {
            try {
                const answer = document.getElementById(`quiz-${quizId}`).value.trim().toLowerCase();
                const result = document.getElementById(`result-${quizId}`);
                if (answer === correctAnswer) {
                    result.innerText = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ';
                    result.style.color = 'green';
                    Telegram.WebApp.sendData(JSON.stringify({ quiz: 'english', level: level, status: 'correct' }));
                    progress[level]++;
                    localStorage.setItem('tegyProgress', JSON.stringify(progress));
                    updateProgress(level);
                    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
                    for (let i = 0; i < 20; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = `${Math.random() * 100}vw`;
                        confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                        document.body.appendChild(confetti);
                        setTimeout(() => confetti.remove(), 1000);
                    }
                } else {
                    result.innerText = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!';
                    result.style.color = 'red';
                    Telegram.WebApp.sendData(JSON.stringify({ quiz: 'english', level: level, status: 'incorrect' }));
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –≤ –∫–≤–∏–∑–µ:', e);
                const result = document.getElementById(`result-${quizId}`);
                result.innerText = '–û—à–∏–±–∫–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
                result.style.color = 'orange';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function init() {
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã
            if (localStorage.getItem('tegyTheme') === 'dark') {
                document.body.classList.add('dark');
            }
            // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
            showMainMenu();
        }

        // –í—ã–∑–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        window.addEventListener('load', init);
    </script>
</body>
</html>
